
iceServers: [{ urls: 'stun:stun.l.google.com:19302' }]

Переделать на Next + приложение React Native


### 
Задание!
сервер Go
не меняя логики добавь логирование всех действий пользователей,
количество соединений в сокетах
количество соединений в комнатах
создание и закрытие соединений кто подсоединился и отсоединился в сокетах.
создание и закрытие комнат имена комнат.
кто вышел и кто вошел комнату.
в логах - я создаю комнату, логи если такая комната уже существует.
в логах - подключился я к комнате или такой комнаты нет.

часто после твоих изменений пользователи не могут обмениваться видео и звуком, так что старайся чтобы это не испортить.

клиент React
когда пользователь заходит на сайт от соединятеся с соекетом, но не с комнатой.
пользователь перед созданием комнаты должен ставить галочку соединиться или создать комнату.


###
Задание!
1. Когда создатель нажимает Leave Room то пользователи подключенные к комнате должны так же выйти из комнаты.
2. Если пользователь хочет подключиться к комнате Join Room, а такой комнаты нет, он не подключается, 
ему выдается сообщение что такой комнаты нет.
3. Не создателю комнаты должны так же показываться кто в комнате.
4. не создатель комнаты может запускать трансляцию Start Call как и создатель, 
5. не создатель может останавливать трансляцию End Call, никого из комнаты выкидывать не должно, чтобы не создатель (и создатель)
мог останавливать и запускать трансляцю
если по заданию исправления не нужны то не исправляй не улучшай код, добавляй на сервере логирование!, только сделай задание! 
6. Отвечай на русском.
###

Задание!
1. Когда создатель нажимает End Call - потом при нажатии - Start Call Not connected to server при нажатии End Call - связь с сервером теряться не должна
2. Когда в комнате два пользователя Start Call - запустить трансляцию - обмен видео - может любой находящийся в комнате.
3. Users in room (2): User856 User61 оповещение кто и сколько в комнате - должно приходить всем пользователям
если по заданию исправления не нужны то не исправляй не улучшай код, добавляй на сервере логирование!, только сделай задание!
Отвечай на русском.
###

тот кто подключается вторым к комнате информации о подключениях пользователей нет, второй подключившийся к комнате до сих пор не может начать трансляцию Start Call

после того как пользователи выходят из комнат, они не могут заново обмениваться видео. на сервере видно как пользователи заходят в комнаты, но в клиентах им не отображается информация о пользователях в комнате.


-когда я выхожу с комнаты, а потом захожу на сайт я не могу подключиться к комнате, выдает ERROR исправь
при разрыве соединения или быстрого выхода из браузера сервер должен это видеть и обновлять данные для соединения.
Если в комнате два пользователя, и подключается третий то второго пользователя идет исключение а третий добовляется.
Если создатель создает комнату, а комната еще висит на сервере с таким именем, то комната должна пересоздаваться.
2025/04/07 18:48:40 [ERROR] Failed to read init data from 172.30.32.1:64420: websocket: close 1001 (going away)
2025/04/07 18:48:40 [CONNECT] New connection from: 172.30.32.1:64445
2025/04/07 18:48:44 [ERROR] Failed to read init data from 172.30.32.1:64278: websocket: close 1001 (going away)
когда я перезапускаю сервер
2025/04/07 18:49:34 [CONNECT] New connection from: 172.30.32.1:64758
2025/04/07 18:49:37 [CONNECT] New connection from: 172.30.32.1:64792
Посмотри чтобы все очищалось и обновлялось и проверялось статусы пользователей.
если по заданию исправления не нужны то не исправляй не улучшай код, добавляй на сервере логирование!, только сделай задание!
Отвечай на русском.

Задание
1. нужно чтобы всем пользователям отображалась информация о подключенных пользователях к комнате. 
Сейчас отображается только создателю комнаты (первому вошедшему в комнату).
2. чтобы запустить Start Call любой пользователь в комнате.

3. Если второй пользователь вышел с комнаты, то комната не закрывается, а ждет подключения.
4. если в комнате 2 пользователя, а подключается 3-тий то второго пользователя исключает из комнаты, а третий подключается, и так далее если будет подключаться к комнате четвертый
   если по заданию исправления не нужны то не исправляй не улучшай код, только сделай задание!
   Отвечай на русском.

End Call после нажатия любым пользователем, нужно чтобы информация обновлялась у пользователей от сервера.
тот кто нажал - ему отображается что он вышел из комнаты, и естетсвенно что в комнате пользователей нет.
тот кто остался ему должны обновиться пользователи в комнате

тот кто выходит с комнаты End Call, должен переподключаться к серверу (без входа в комнату)


после нажатия пользователем End Call, браузер должен обновить State Room: закрыть сокет соединение и заново подключиться.

1 когда пользователь подсоединятся к комнате, ему должна приходить информация кто находится в комнате,
когда пользователь покидает комнату, остальным пользователям так же должна приходить обновленная информация.

2 любой пользователь может запускать трансляцию Start Call из комнаты
- если по заданию исправления не нужны то не исправляй не улучшай код, только сделай задание!
  Отвечай на русском. Дай полные кода

Теперь кнопка "Start Call" меняется на "End Call" при isCallActive === true


кто пользователей и названий комнат. 
создание и закрытие соединений, кто вышел с комнаты

сделай так чтобы
1. с комнаты можно было выходить.
2. End Call  - когда выходишь чтобы вторго пользователя оповещало и у него должна быть не зависающая картинка , а черный экран.
3. После выхода End Call можно было снова зайти
4. Если выходишь с комнаты то это срабатывает End Call и выходит с комнаты у пользователя в комнате должен появится черный экран.
5. После выхода с комнаты можно опять зайти в комнату и нажать Start Call и подсоединиться к видеоконференции.
- сейчас если нажмешь End Call то обратно не заходит, нужно перезагружать страницу.

1. любой пользователь могу запускать трансляцию
2. при нажатии любым пользователем End Call чтобы комната не закрывалась

когда я нажимаю выйти из комнаты
Users in room (1):
1. User397 - пользователь остается в комнате.
2. User397 - нет копки обратно войти в комнату.
3. Добавь на сервере везде логирование связанные с действием пользователей.
Дай полный код. Отвечай на русском



1. когда пользователи заходят в браузер нужно чтобы они сразу подключались к комнате,
   (был возможность выйти с комнаты, когда выходишь с комнаты, атвоматическое подключение останавливается)

Улучшения:
1) потеря связи с пользователем - сервер удаляет из комнаты
2) Участники заходя на сайт - сразу входят в комнату (room1) и транслируют видео
3) если подключается к комнете еще один пользователь, из комнаты исключается тот кто подключился последним, 
и вместо его подключается новый пользователь.
3) Подключи DeviceSelector.tsx  чтобы была возможно на всех устройствах выбирать device
4) Подключи VideoPlayer.tsx чтобы можно удобнее пользоваться видео  (переделай их в js)
5) добавь все STUN серверы которые есть от google

