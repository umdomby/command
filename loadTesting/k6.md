sudo apt-get update

k6 run load_test.js

sudo snap install k6
k6 version


     ✗ is status 200
      ↳  99% — ✓ 6886 / ✗ 67

     checks.........................: 99.03% 6886 out of 6953
     data_received..................: 123 MB 5.3 MB/s
     data_sent......................: 1.1 MB 47 kB/s
     http_req_blocked...............: avg=358.73ms min=0s           med=3.38µs max=21.38s  p(90)=111.13ms p(95)=2.22s
     http_req_connecting............: avg=285.96ms min=0s           med=0s     max=14.77s  p(90)=54.69ms  p(95)=1.14s
     http_req_duration..............: avg=63.46ms  min=-689115320ns med=10.3ms max=15.13s  p(90)=62.11ms  p(95)=329.85ms
       { expected_response:true }...: avg=64.08ms  min=-689115320ns med=10.5ms max=15.13s  p(90)=62.82ms  p(95)=338.85ms
     http_req_failed................: 0.96%  67 out of 6953
     http_req_receiving.............: avg=23.64ms  min=-725363874ns med=1.21ms max=5.98s   p(90)=17.76ms  p(95)=59.86ms
     http_req_sending...............: avg=35.35µs  min=0s           med=7.59µs max=47.27ms p(90)=21.72µs  p(95)=33.79µs
     http_req_tls_handshaking.......: avg=60.11ms  min=-719645193ns med=0s     max=14.85s  p(90)=8.32ms   p(95)=20.35ms
     http_req_waiting...............: avg=39.79ms  min=0s           med=7.71ms max=15.13s  p(90)=33.77ms  p(95)=48.21ms
     http_reqs......................: 6953   301.455696/s
     iteration_duration.............: avg=1.55s    min=1s           med=1.01s  max=24s     p(90)=2.04s    p(95)=4.63s
     iterations.....................: 6953   301.455696/s
     vus............................: 2      min=2            max=1000
     vus_max........................: 1000   min=1000         max=1000


running (23.1s), 0000/1000 VUs, 6953 complete and 0 interrupted iterations                                                                                                                                                          
default ✓ [======================================] 1000 VUs  10s



     ✗ is status 200
      ↳  99% — ✓ 4501 / ✗ 41

     checks.........................: 99.09% 4501 out of 4542
     data_received..................: 80 MB  5.8 MB/s
     data_sent......................: 653 kB 48 kB/s
     http_req_blocked...............: avg=122.39ms min=0s           med=3.39µs   max=11.96s p(90)=41.41ms p(95)=538.21ms
     http_req_connecting............: avg=71.62ms  min=0s           med=0s       max=3.23s  p(90)=10.59ms p(95)=103.06ms
     http_req_duration..............: avg=29.51ms  min=-584496658ns med=3.65ms   max=4.09s  p(90)=32.7ms  p(95)=66.8ms
       { expected_response:true }...: avg=29.78ms  min=-584496658ns med=3.69ms   max=4.09s  p(90)=32.94ms p(95)=67.07ms
     http_req_failed................: 0.90%  41 out of 4542
     http_req_receiving.............: avg=10.55ms  min=-587582221ns med=810.12µs max=1.01s  p(90)=6.98ms  p(95)=13.45ms
     http_req_sending...............: avg=12.95µs  min=0s           med=7.65µs   max=1.62ms p(90)=21.18µs p(95)=29.39µs
     http_req_tls_handshaking.......: avg=47.64ms  min=0s           med=0s       max=10.87s p(90)=6.08ms  p(95)=115.37ms
     http_req_waiting...............: avg=18.94ms  min=0s           med=2.74ms   max=4.09s  p(90)=21.62ms p(95)=36.35ms
     http_reqs......................: 4542   331.654621/s
     iteration_duration.............: avg=1.15s    min=1s           med=1s       max=14.48s p(90)=1.28s   p(95)=1.89s
     iterations.....................: 4542   331.654621/s
     vus............................: 1      min=1            max=500
     vus_max........................: 500    min=500          max=500


running (13.7s), 000/500 VUs, 4542 complete and 0 interrupted iterations                                                                                                                                                            
default ✓ [======================================] 500 VUs  10s






            Итог
            checks запросы
            http_req_duration 1.avg= Среднее время выполнения запроса  4. max= Максимальное время выполнения запроса — (возможно, это выброс).
            iterations  /s

            Все запросы успешны (100% статус 200).
            Среднее время выполнения запроса — 62.19 мс.
            Максимальное время выполнения запроса — 746.07 мс (возможно, это выброс).
            Скорость запросов — 9.55 запросов в секунду.


Основные метрики
✓ is status 200

Успешные проверки: все запросы вернули статус 200 OK.

checks: 100.00% 286 out of 286

Процент успешных проверок: 100% запросов прошли проверку (все 286 запросов вернули статус 200).

data_received: 5.0 MB 167 kB/s

Объем полученных данных: 5.0 МБ данных было получено от сервера.

Скорость получения данных: 167 КБ/с.

data_sent: 34 kB 1.1 kB/s

Объем отправленных данных: 34 КБ данных было отправлено на сервер.

Скорость отправки данных: 1.1 КБ/с.

Метрики HTTP-запросов
http_req_blocked: avg=3.08ms min=1.06µs med=2.95µs max=89.89ms p(90)=4.89µs p(95)=14.15µs

Время блокировки запроса: время, проведенное в ожидании перед началом запроса (например, из-за ограничений на количество соединений).

avg: среднее время — 3.08 мс.

min: минимальное время — 1.06 мкс.

med: медианное время — 2.95 мкс.

max: максимальное время — 89.89 мс.

p(90): 90-й процентиль — 4.89 мкс.

p(95): 95-й процентиль — 14.15 мкс.

http_req_connecting: avg=78.42µs min=0s med=0s max=2.35ms p(90)=0s p(95)=0s

Время установления соединения: время, затраченное на установку TCP-соединения с сервером.

avg: среднее время — 78.42 мкс.

min: минимальное время — 0 мс (соединение уже было установлено).

med: медианное время — 0 мс.

max: максимальное время — 2.35 мс.

p(90): 90-й процентиль — 0 мс.

p(95): 95-й процентиль — 0 мс.

http_req_duration: avg=62.19ms min=1.98ms med=2.77ms max=746.07ms p(90)=5.7ms p(95)=706.9ms

Общее время выполнения запроса: время от начала запроса до получения ответа.

avg: среднее время — 62.19 мс.

min: минимальное время — 1.98 мс.

med: медианное время — 2.77 мс.

max: максимальное время — 746.07 мс.

p(90): 90-й процентиль — 5.7 мс.

p(95): 95-й процентиль — 706.9 мс.

{ expected_response:true }: avg=62.19ms min=1.98ms med=2.77ms max=746.07ms p(90)=5.7ms p(95)=706.9ms

Время выполнения запросов, которые прошли проверку (все запросы вернули статус 200).

Метрики такие же, как в http_req_duration.

http_req_failed: 0.00% 0 out of 286

Процент неудачных запросов: 0% запросов завершились с ошибкой (все 286 запросов успешны).

http_req_receiving: avg=587.06µs min=104.62µs med=341µs max=25.77ms p(90)=837.16µs p(95)=937.42µs

Время получения данных: время, затраченное на получение ответа от сервера.

avg: среднее время — 587.06 мкс.

min: минимальное время — 104.62 мкс.

med: медианное время — 341 мкс.

max: максимальное время — 25.77 мс.

p(90): 90-й процентиль — 837.16 мкс.

p(95): 95-й процентиль — 937.42 мкс.

http_req_sending: avg=10.74µs min=3.6µs med=7.4µs max=314.16µs p(90)=14.33µs p(95)=21.77µs

Время отправки данных: время, затраченное на отправку запроса на сервер.

avg: среднее время — 10.74 мкс.

min: минимальное время — 3.6 мкс.

med: медианное время — 7.4 мкс.

max: максимальное время — 314.16 мкс.

p(90): 90-й процентиль — 14.33 мкс.

p(95): 95-й процентиль — 21.77 мкс.

http_req_tls_handshaking: avg=454.72µs min=0s med=0s max=14.89ms p(90)=0s p(95)=0s

Время TLS-рукопожатия: время, затраченное на установку безопасного соединения (если используется HTTPS).

avg: среднее время — 454.72 мкс.

min: минимальное время — 0 мс (рукопожатие не требовалось).

med: медианное время — 0 мс.

max: максимальное время — 14.89 мс.

p(90): 90-й процентиль — 0 мс.

p(95): 95-й процентиль — 0 мс.

http_req_waiting: avg=61.59ms min=1.68ms med=2.36ms max=745.15ms p(90)=4.72ms p(95)=706.43ms

Время ожидания ответа: время от отправки запроса до начала получения данных.

avg: среднее время — 61.59 мс.

min: минимальное время — 1.68 мс.

med: медианное время — 2.36 мс.

max: максимальное время — 745.15 мс.

p(90): 90-й процентиль — 4.72 мс.

p(95): 95-й процентиль — 706.43 мс.

http_reqs: 286 9.550059/s

Общее количество HTTP-запросов: 286 запросов было выполнено.

Скорость запросов: 9.55 запросов в секунду.

Метрики итераций
iteration_duration: avg=1.06s min=1s med=1s max=1.83s p(90)=1s p(95)=1.71s

Время выполнения итерации: время, затраченное на выполнение одной итерации (одного цикла теста).

avg: среднее время — 1.06 с.

min: минимальное время — 1 с.

med: медианное время — 1 с.

max: максимальное время — 1.83 с.

p(90): 90-й процентиль — 1 с.

p(95): 95-й процентиль — 1.71 с.

iterations: 286 9.550059/s

Общее количество итераций: 286 итераций было выполнено.

Скорость итераций: 9.55 итераций в секунду.

Метрики виртуальных пользователей (VUs)
vus: 10 min=10 max=10

Количество виртуальных пользователей (VUs): 10 пользователей работали одновременно.

min: минимальное количество — 10.

max: максимальное количество — 10.

vus_max: 10 min=10 max=10

Максимальное количество виртуальных пользователей: 10 пользователей (настройка теста).

min: минимальное количество — 10.

max: максимальное количество — 10.

