# ARDU
Моторы (драйвер BTS7960 — два DC-мотора)

enA (D1) — PWM-сигнал скорости для мотора A
in1 (D2), in2 (D3) — направление мотора A (H-bridge)
in3 (D4), in4 (D5) — направление мотора B
enB (D6) — PWM-сигнал скорости для мотора B

Логика:
Команды MFA/MRA — задают направление мотора A (вперёд/назад).
Команды MFB/MRB — задают направление мотора B.
Команда SPD — отдельно задаёт скорость (0–255) через enA или enB.
STP — останавливает оба мотора (PWM = 0).
Реле / выходы

button1 (GPIO3 / RX) — реле 1 (управление светом)
button2 (D0 / GPIO16) — реле 2 (сигнализация + зарядка)

Логика:
Команда RLY с параметрами pin и state включает/выключает реле.
При включении button2 (D0 = HIGH) моторы принудительно останавливаются.
Сервоприводы

SERVO1_PIN (D7) — серво по оси Y (правый стик)
SERVO2_PIN (D8) — серво по оси X (левый стик)

Логика:
Команды SSY, SSX, SAR, SSA, SSB — устанавливают абсолютный или относительный угол (0–180°).
При старте оба серво устанавливаются в 90°.
Входы

A0 (analogPin) — аналоговый вход (датчик напряжения/тока или потенциометр)
button3Rob (GPIO1 / TX) — цифровой вход (датчик движения или кнопка тревоги)

Логика:

Когда button2 включено (LOW — активный уровень), код в цикле читает A0 и управляет скоростью мотора B (enB) пропорционально значению (режим ручного управления/зарядки).
Если включена тревога (alarm == "on") и срабатывает button3Rob (LOW), каждые 5 сек отправляется сообщение "ALARM TRUE" и моторы останавливаются.

Дополнительно

При потере WebSocket-соединения моторы останавливаются.
Каждые 5 сек отправляется heartbeat-лог с текущим состоянием (напряжение, реле, серво, тревога).
Если нет соединения более 20 часов — ESP перезагружается.

Итого: код реализует дистанционное управление двумя моторами, двумя реле, двумя серво, плюс локальную логику тревоги и ручного управления по потенциометру при включённом реле зарядки.


button2 (D0 / GPIO16) — реле 2 сделай только включение выключение реле убрать везде логику (сигнализация + зарядка)
button3Rob (GPIO1 / TX) — цифровой вход (датчик движения или кнопка тревоги) убрать вообще в коде, оставить стандартно для TX
A0 (analogPin) — аналоговый вход только датчик напряжения

больше ничего не изменяй