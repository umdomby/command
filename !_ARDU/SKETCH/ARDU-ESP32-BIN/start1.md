# ESP8266

| Пин Arduino | GPIO ESP8266 | Назначение в проекте                  | Примечание                                                                 |
|-------------|--------------|---------------------------------------|----------------------------------------------------------------------------|
| D0          | GPIO16       | PIN_RELAY (реле)                      | Active LOW, нет встроенного pull-up/pull-down, подходит для wake-up        |
| D1          | GPIO5        | PIN_ENA (PWM для мотора A)            | Поддерживает PWM (analogWrite)                                             |
| D2          | GPIO4        | PIN_IN1 (направление мотора A)        | Обычный цифровой пин                                                       |
| D3          | GPIO0        | PIN_IN2 (направление мотора A)        | Встроенный pull-up, подключён к кнопке Flash — будьте осторожны при старте |
| D4          | GPIO2        | PIN_IN3 (направление мотора B)        | Встроенный pull-up, подключён к встроенному LED (TXD1)                     |
| D5          | GPIO14       | PIN_IN4 (направление мотора B)        | Обычный цифровой пин                                                       |
| D6          | GPIO12       | PIN_ENB (PWM для мотора B)            | Поддерживает PWM (analogWrite)                                             |
| D7          | GPIO13       | PIN_SERVO1 (серво 1)                  | Подходит для управления серво                                             |
| D8          | GPIO15       | PIN_SERVO2 (серво 2)                  | Встроенный pull-down, **обязательно** подключить к GND при старте         |
| A0          | ADC0         | PIN_VOLTAGE (измерение напряжения)    | Аналоговый вход 0–1 В (до 3.2 В с внешним делителем)                       |


Сигнал драйвера,Подключить к пину NodeMCU
ENA,D1
IN1,D2
IN2,D3
IN3,D4
IN4,D5
ENB,D6

# ESP32 S3 (BTS7960)

| Надпись на плате (Pin label) | GPIO ESP32-S3 | Назначение в проекте                  | Примечание                                                                 |
|------------------------------|---------------|---------------------------------------|----------------------------------------------------------------------------|
| 16                           | GPIO16        | PIN_RELAY (реле)                      | Active LOW, обычный цифровой пин, безопасный для вывода                           |
| 18                           | GPIO18        | PIN_ENA (PWM для мотора A)            | Поддерживает PWM (ledcWrite / analogWrite), отличный выбор                        |
| 19                           | GPIO19        | PIN_IN1 (направление мотора A)        | Обычный цифровой пин                                                              |
| 20                           | GPIO20        | PIN_IN2 (направление мотора A)        | Обычный цифровой пин                                                              |
| 21                           | GPIO21        | PIN_IN3 (направление мотора B)        | Обычный цифровой пин                                                              |
| 17                           | GPIO17        | PIN_IN4 (направление мотора B)        | Обычный цифровой пин                                                              |
| 15                           | GPIO15        | PIN_ENB (PWM для мотора B)            | Поддерживает PWM (ledcWrite / analogWrite)                                        |
| 13                           | GPIO13        | PIN_SERVO1 (серво 1)                  | Поддерживает PWM, отлично подходит для ServoEasing                                |
| 14                           | GPIO14        | PIN_SERVO2 (серво 2)                  | Поддерживает PWM, безопасный пин                                                  |
| 4                            | GPIO4         | PIN_VOLTAGE (измерение напряжения)    | ADC1_CH3, используйте делитель напряжения (0–3.3 В макс.)                         |

### Рекомендуемая схема подключения к драйверу моторов (BTS7960):

| Сигнал драйвера | Подключить к пину на плате (label) |
|-----------------|------------------------------------|
| ENA             | 18                                 |
| IN1             | 19                                 |
| IN2             | 20                                 |
| IN3             | 21                                 |
| IN4             | 17                                 |
| ENB             | 15                                 |




### Сравнительная таблица перехода с ESP8266 (NodeMCU) на ESP32-S3
(Чтобы легко увидеть, какой провод от периферии переставить с какого пина на какой)

| Функция в проекте              | Пин на ESP8266 (надпись на плате) | Пин на ESP32-S3 (надпись на плате) | Куда переставить провод                          | Примечание                                      |
|--------------------------------|-----------------------------------|------------------------------------|--------------------------------------------------|-------------------------------------------------|
| PIN_RELAY (реле, active LOW)   | D0                                | 16                                 | D0 → 16                                          | Обычный output пин                              |
| PIN_ENA (PWM мотор A)          | D1                                | 18                                 | D1 → 18                                          | PWM работает на обоих                           |
| PIN_IN1 (направление мотор A)  | D2                                | 19                                 | D2 → 19                                          | Обычный output                                  |
| PIN_IN2 (направление мотор A)  | D3                                | 20                                 | D3 → 20                                          | На ESP8266 имеет pull-up, на S3 — чистый         |
| PIN_IN3 (направление мотор B)  | D4                                | 21                                 | D4 → 21                                          | На ESP8266 имеет pull-up и LED, на S3 — чистый   |
| PIN_IN4 (направление мотор B)  | D5                                | 17                                 | D5 → 17                                          | Обычный output                                  |
| PIN_ENB (PWM мотор B)          | D6                                | 15                                 | D6 → 15                                          | PWM работает на обоих                           |
| PIN_SERVO1 (серво 1)           | D7                                | 13                                 | D7 → 13                                          | PWM/Servo OK                                    |
| PIN_SERVO2 (серво 2)           | D8                                | 14                                 | D8 → 14                                          | На ESP8266 требует pull-down к GND при старте   |
| PIN_VOLTAGE (аналог. вход)     | A0                                | 4                                  | A0 → 4                                           | На S3 используйте делитель (ADC 0–3.3 В)        |

### Схема подключения к драйверу моторов (BTS7960) 

| Сигнал драйвера | ESP8266 (старый) | ESP32-S3 (новый) | Переставить провод с ... на ... |
|-----------------|------------------|------------------|---------------------------------|
| ENA             | D1               | 18               | D1 → 18                         |
| IN1             | D2               | 19               | D2 → 19                         |
| IN2             | D3               | 20               | D3 → 20                         |
| IN3             | D4               | 21               | D4 → 21                         |
| IN4             | D5               | 17               | D5 → 17                         |
| ENB             | D6               | 15               | D6 → 15                         |
Два ядра позволяют параллелить задачи (например, одно ядро для WebSocket, второе для управления моторами/серво

