Байт   Описание
0      Тип сообщения (1 байт)
0x01 = Heartbeat (HBT)
0x02 = Установка скорости мотора + направление (SPD + MFx/MRx)
0x03 = Установка абсолютного угла сервопривода (SSY/SSX)
0x04 = Установка относительного угла сервопривода (SSA/SSB)
0x05 = Установка двух сервоприводов сразу (SAR)
0x06 = Управление реле (RLY)
0x07 = Управление ALARM
0x08 = Запрос текущего состояния (GET_STATE) ← аналог GET_RELAYS + analog + servo angles
0x81 = Ответ/состояние от ESP (log/state)

1      Device ID — младшие 4 байта (uint32_t)  ← обычно хватает, можно убрать если всегда один девайс
(если нужен полный 16-символьный hex → можно 8 байт, но редко когда)

2–5    Payload (зависит от типа сообщения)

Примеры payload:

Тип 0x02 — моторы
2     Номер мотора (0=A, 1=B)
3     Скорость 0..255 (uint8_t)
4     Направление: 0=стоп, 1=вперёд, 2=назад

Тип 0x03 — абсолютный угол сервопривода
2     Номер серво (0=ServoY, 1=ServoX)
3     Угол 0..180 (uint8_t)

Тип 0x05 — оба серво сразу (SAR)
2     Угол ServoY (0..180)
3     Угол ServoX (0..180)

Тип 0x06 — реле
2     Номер реле (0=pin3, 1=D0)
3     Состояние (0=off, 1=on)

Тип 0x07 — alarm
2     Состояние (0=off, 1=on)

Тип 0x81 — ответ от ESP (состояние)
2     Состояние pin3      (0/1)
3     Состояние D0        (0/1)
4     Текущее напряжение A0 (0..255 → 0..5.1В с шагом ~0.02В)
5     Текущий угол Servo1
6     Текущий угол Servo2
7     Alarm состояние     (0/1)
8     Флаг motion detect  (0/1)   ← если используете