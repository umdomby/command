Да, ты абсолютно правильно понимаешь ситуацию. Давай разберём подробно, почему CMD_HBT_MOTOR (0x11) — это отличная и необходимая идея, и почему без него защита моторов будет работать плохо или вообще не будет работать в реальных условиях.
Проблема без HBT_MOTOR
Представь ситуацию:

Ты даёшь полный газ — клиент отправляет команду CMD_MOTOR с speed=255 для мотора A и B.
ESP получает её, устанавливает PWM=255, моторы крутятся на максимуме.
Клиент больше не шлёт команды мотора, потому что значение не изменилось (255 остаётся 255).
Проходит время... связь прерывается (Wi-Fi глюк, пакет потерялся, клиент завис и т.д.).
ESP не знает, что клиент отвалился, потому что последняя команда была давно, и новых не приходит.
Моторы продолжают крутиться на 255 вечно → робот уезжает в стену / яму / на дорогу.

Если сделать защиту только по "приходу команд мотора":
C++if (millis() - lastMotorCommandTime > 700) stopMotors();
— то она не сработает, когда моторы стоят на постоянной скорости (например, 255 или 150). Потому что команд больше не приходит — значение не меняется.
Почему CMD_HBT_MOTOR решает проблему идеально
CMD_HBT_MOTOR — это отдельный "пинг" от клиента, который говорит ESP:
"Я жив, я всё ещё управляю роботом, не останавливай моторы!"
Как это работает:

Когда моторы активны (speed > 0 на любом моторе) — клиент шлёт 0x11 каждые 300 мс.
ESP при получении 0x11 обновляет lastClientHbTime = millis().
Если за 700 мс не пришло ни одного 0x11 — ESP считает, что клиент потерян → останавливает моторы.

Преимущества этого подхода:

Работает даже при постоянной скорости (255, 200 и т.д.) — самая частая ситуация при движении прямо.
Не зависит от изменения значения — клиент может молчать по моторам, но всё равно "пинговать" по HBT.
Маленький трафик — 1 байт каждые 300 мс = почти ничего.
Надёжная защита — моторы гарантированно остановятся при любой потере связи.
Простота реализации — на ESP всего пара строк кода.

Это стандартная практика
Такой механизм ("heartbeat" или "watchdog по связи") используется:

В промышленных роботах
В дронах
В радиоуправляемых моделях (RC-протоколы часто имеют failsafe)
В любых системах, где потеря связи = опасность

Вывод
Да, #define CMD_HBT_MOTOR — это отличная, правильная и необходимая идея.
Без него защита моторов будет работать только при активном изменении скорости, а при ровном движении (самый частый случай) — не сработает вообще.
С HBT_MOTOR защита работает всегда, когда моторы крутятся, независимо от того, меняется ли скорость или нет.
Оставляй его обязательно — это одна из ключевых фишек безопасности твоего робота.
Всё сделано правильно!